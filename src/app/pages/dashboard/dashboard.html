<div class="dashboard-container">
  <!-- Header -->
  <div class="dashboard-header">
    <div class="header-content">
      <h1>üìä Dashboard Administrativo</h1>
      <p class="subtitle">Resumen general de ventas y estad√≠sticas</p>
    </div>
  </div>

  <!-- Tarjetas de estad√≠sticas -->
  <div class="stats-grid">
    <div class="stat-card stat-primary">
      <div class="stat-icon">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
      </div>
      <div class="stat-info">
        <span class="stat-label">Total Ventas</span>
        <span class="stat-value">${{ totalVentas | number:'1.0-0' }}</span>
      </div>
    </div>

    <div class="stat-card stat-success">
      <div class="stat-icon">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
        </svg>
      </div>
      <div class="stat-info">
        <span class="stat-label">Ventas Hoy</span>
        <span class="stat-value">${{ ventasHoy | number:'1.0-0' }}</span>
      </div>
    </div>

    <div class="stat-card stat-warning">
      <div class="stat-icon">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
        </svg>
      </div>
      <div class="stat-info">
        <span class="stat-label">Promedio Venta</span>
        <span class="stat-value">${{ promedioVenta | number:'1.0-0' }}</span>
      </div>
    </div>

    <div class="stat-card stat-info">
      <div class="stat-icon">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
        </svg>
      </div>
      <div class="stat-info">
        <span class="stat-label">Total Clientes</span>
        <span class="stat-value">{{ totalClientes }}</span>
      </div>
    </div>
  </div>

  <!-- Widget de Estad√≠sticas IA -->
  <div class="ia-stats-widget" *ngIf="statsIA">
    <div class="ia-header">
      <div class="ia-icon">ü§ñ</div>
      <div>
        <h3>Estado de la Inteligencia Artificial</h3>
        <p class="ia-subtitle">Sistema de recomendaciones y asistente virtual</p>
      </div>
    </div>
    
    <div class="ia-stats-grid">
      <div class="ia-stat">
        <div class="ia-stat-icon">üì¶</div>
        <div class="ia-stat-info">
          <span class="ia-stat-label">Productos Totales</span>
          <span class="ia-stat-value">{{ statsIA.productos.total }}</span>
        </div>
      </div>
      
      <div class="ia-stat">
        <div class="ia-stat-icon">‚úÖ</div>
        <div class="ia-stat-info">
          <span class="ia-stat-label">Con Stock</span>
          <span class="ia-stat-value">{{ statsIA.productos.con_stock }}</span>
        </div>
      </div>
      
      <div class="ia-stat">
        <div class="ia-stat-icon">‚ùå</div>
        <div class="ia-stat-info">
          <span class="ia-stat-label">Sin Stock</span>
          <span class="ia-stat-value">{{ statsIA.productos.sin_stock }}</span>
        </div>
      </div>
    </div>
    
    <div class="ia-message">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      <span>{{ statsIA.mensaje }}</span>
    </div>
  </div>

  <div class="ia-stats-widget ia-loading" *ngIf="cargandoStatsIA">
    <div class="loading-spinner"></div>
    <p>Cargando estad√≠sticas de IA...</p>
  </div>

  <!-- Gr√°ficos principales -->
  <div class="charts-grid">
    <!-- Gr√°fico de Ventas -->
    <div class="chart-card chart-large">
      <div class="chart-header">
        <div>
          <h3>üìà Ventas en el Tiempo</h3>
          <p class="chart-subtitle">Evoluci√≥n de las ventas</p>
        </div>
        <div class="filter-buttons">
          <button 
            [class.active]="filtroVentas === 'dia'" 
            (click)="cambiarFiltroVentas('dia')"
            class="filter-btn">
            D√≠a
          </button>
          <button 
            [class.active]="filtroVentas === 'semana'" 
            (click)="cambiarFiltroVentas('semana')"
            class="filter-btn">
            Semana
          </button>
          <button 
            [class.active]="filtroVentas === 'mes'" 
            (click)="cambiarFiltroVentas('mes')"
            class="filter-btn">
            Mes
          </button>
        </div>
      </div>
      <div class="chart-body">
        <canvas id="ventasChart"></canvas>
      </div>
    </div>

    <!-- Gr√°fico de Productos -->
    <div class="chart-card">
      <div class="chart-header">
        <div>
          <h3>üèÜ Top 5 Productos</h3>
          <p class="chart-subtitle">M√°s vendidos</p>
        </div>
      </div>
      <div class="chart-body">
        <canvas id="productosChart"></canvas>
      </div>
    </div>

    <!-- Gr√°fico de Clientes -->
    <div class="chart-card">
      <div class="chart-header">
        <div>
          <h3>üë• Tipos de Clientes</h3>
          <p class="chart-subtitle">Registrados vs Temporales</p>
        </div>
      </div>
      <div class="chart-body">
        <canvas id="clientesChart"></canvas>
      </div>
    </div>
  </div>

  <!-- Tabla de productos m√°s vendidos -->
  <div class="table-card">
    <div class="table-header">
      <h3>üõçÔ∏è Detalle Productos M√°s Vendidos</h3>
    </div>
    <div class="table-wrapper">
      <table class="dashboard-table">
        <thead>
          <tr>
            <th>#</th>
            <th>Producto</th>
            <th>Cantidad Vendida</th>
            <th>Total Recaudado</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let producto of getTopProductos(); let i = index">
            <td>
              <span class="rank" [class.rank-gold]="i === 0" [class.rank-silver]="i === 1" [class.rank-bronze]="i === 2">
                {{ i + 1 }}
              </span>
            </td>
            <td>
              <span class="product-name">{{ producto.nombre }}</span>
            </td>
            <td>
              <span class="quantity-badge">{{ producto.cantidad }} unidades</span>
            </td>
            <td>
              <span class="total-amount">${{ producto.total | number:'1.0-0' }}</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
